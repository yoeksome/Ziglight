###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         06/Jun/2017  15:23:35 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\Source\List1.c                    #
#    Command line       =  -f E:\work\smartlight\ZigLight001\Projects\zstack\ #
#                          Samples\ZigLightApp\CC2530DB\..\..\..\Tools\CC2530 #
#                          DB\f8wRouter.cfg (-DCPU32MHZ -DROOT=__near_func    #
#                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                   #
#                          -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8         #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                   #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\Tools\CC2530DB\ #
#                          f8wConfig.cfg (-DZIGBEEPRO -DSECURE=0              #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFF00                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 E:\work\smartlight\ZigLight #
#                          001\Projects\zstack\Samples\ZigLightApp\Source\Lis #
#                          t1.c -D ZTOOL_P1 -D MT_TASK -D MT_SYS_FUNC -D      #
#                          MT_ZDO_FUNC -D xLCD_SUPPORTED=DEBUG -D             #
#                          MT_ZDO_MGMT -lC E:\work\smartlight\ZigLight001\Pro #
#                          jects\zstack\Samples\ZigLightApp\CC2530DB\RouterEB #
#                          \List\ -lA E:\work\smartlight\ZigLight001\Projects #
#                          \zstack\Samples\ZigLightApp\CC2530DB\RouterEB\List #
#                          \ --diag_suppress Pe001,Pa010 -o                   #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\RouterEB\Obj\ -e         #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I E:\work\smartlight\ZigLight001\Projects\zstack\ #
#                          Samples\ZigLightApp\CC2530DB\ -I                   #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\Source\ -I            #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\ZMain\TI2530DB\ #
#                           -I E:\work\smartlight\ZigLight001\Projects\zstack #
#                          \Samples\ZigLightApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\hal\include\ -I E:\work\smartlight\ZigLight0 #
#                          01\Projects\zstack\Samples\ZigLightApp\CC2530DB\.. #
#                          \..\..\..\..\Components\hal\target\CC2530EB\ -I    #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\..\..\Component #
#                          s\mac\include\ -I E:\work\smartlight\ZigLight001\P #
#                          rojects\zstack\Samples\ZigLightApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\mac\high_level\ -I             #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\..\..\Component #
#                          s\mac\low_level\srf04\ -I                          #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\..\..\Component #
#                          s\mac\low_level\srf04\single_chip\ -I              #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\..\..\Component #
#                          s\mt\ -I E:\work\smartlight\ZigLight001\Projects\z #
#                          stack\Samples\ZigLightApp\CC2530DB\..\..\..\..\..\ #
#                          Components\osal\include\ -I                        #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\..\..\Component #
#                          s\services\saddr\ -I E:\work\smartlight\ZigLight00 #
#                          1\Projects\zstack\Samples\ZigLightApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\services\sdata\ -I          #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\..\..\Component #
#                          s\stack\af\ -I E:\work\smartlight\ZigLight001\Proj #
#                          ects\zstack\Samples\ZigLightApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\stack\nwk\ -I                     #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\..\..\Component #
#                          s\stack\sapi\ -I E:\work\smartlight\ZigLight001\Pr #
#                          ojects\zstack\Samples\ZigLightApp\CC2530DB\..\..\. #
#                          .\..\..\Components\stack\sec\ -I                   #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\..\..\Component #
#                          s\stack\sys\ -I E:\work\smartlight\ZigLight001\Pro #
#                          jects\zstack\Samples\ZigLightApp\CC2530DB\..\..\.. #
#                          \..\..\Components\stack\zdo\ -I                    #
#                          E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\..\..\..\..\..\Component #
#                          s\zmac\ -I E:\work\smartlight\ZigLight001\Projects #
#                          \zstack\Samples\ZigLightApp\CC2530DB\..\..\..\..\. #
#                          .\Components\zmac\f8w\ -Ohz --require_prototypes   #
#    List file          =  E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\RouterEB\List\List1.lst  #
#    Object file        =  E:\work\smartlight\ZigLight001\Projects\zstack\Sam #
#                          ples\ZigLightApp\CC2530DB\RouterEB\Obj\List1.r51   #
#                                                                             #
#                                                                             #
###############################################################################

E:\work\smartlight\ZigLight001\Projects\zstack\Samples\ZigLightApp\Source\List1.c
      1          
      2          #include "List1.h"
      3          #include "mt_uart.h"
      4          #include "ZDProfile.h"
      5          #include "ZDApp.h"
      6          extern Node *nodelist;
      7          extern Node *deletnodelist;
      8          extern uint8 newdevice_joinin;//新O浼尤苏I =0耸炯尤氤鲥e =1加入成功

   \                                 In  segment XDATA_Z, align 1, keep-with-next
      9          uint8 currentMac[8];
   \                     currentMac:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     10          uint8 NewMacUpate=0;//by liu
   \                     NewMacUpate:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     11          extern uint8 ZDAppTaskID;
     12          /* 1.初始化线性表，即置单链表的表头指针为空 */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     13          void initList(Node **pNode)
   \                     initList:
     14          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     15          //  uint8 i;
     16            *pNode = NULL;
   \   000004   8A82         MOV     DPL,R2
   \   000006   8B83         MOV     DPH,R3
   \   000008   E4           CLR     A
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   A3           INC     DPTR
   \   00000B   F0           MOVX    @DPTR,A
     17          //  pNode = (Node *)osal_mem_alloc(sizeof(Node)); //申请新节点
     18            (*pNode)->next = NULL;
   \   00000C   90000C       MOV     DPTR,#0xc
   \   00000F   F0           MOVX    @DPTR,A
   \   000010   A3           INC     DPTR
   \   000011   F0           MOVX    @DPTR,A
     19            (*pNode)->prior = NULL;
   \   000012   8A82         MOV     DPL,R2
   \   000014   8B83         MOV     DPH,R3
   \   000016   12....       LCALL   ?Subroutine2 & 0xFFFF
     20          //  for(i=0;i<8;i++)
     21          //    pNode->extaddr[i] = 0;
     22          //  pNode->heartbeatCnt = 0;
     23          //  pNode->heartbeatCntOld = 0;
     24          //  pNode->detectHeartbeatCnt = 0;
     25            //pruint8f("initList函数执行，初始化成功\n");
     26          }
   \                     ??CrossCallReturnLabel_9:
   \   000019   D083         POP     DPH
   \   00001B   D082         POP     DPL
   \   00001D   02....       LJMP    ?BRET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   240E         ADD     A,#0xe
   \   000003                REQUIRE ??Subroutine8_0
   \   000003                ; // Fall through to label ??Subroutine8_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine8_0:
   \   000000   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   000003   E4           CLR     A
   \   000004   F0           MOVX    @DPTR,A
   \   000005   A3           INC     DPTR
   \   000006   F0           MOVX    @DPTR,A
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   F8           MOV     R0,A
   \   000001   A3           INC     DPTR
   \   000002   E0           MOVX    A,@DPTR
   \   000003   3400         ADDC    A,#0x0
   \   000005   F9           MOV     R1,A
   \   000006   8882         MOV     DPL,R0
   \   000008   8983         MOV     DPH,R1
   \   00000A   22           RET
     27           
     28          /* 2.创建线性表，此函数输入负数终止读取数据*/
     29          //Node *creatList(Node *pHead , uint8 * extaddr)
     30          //{
     31          //  Node *p1,*p2;
     32          //  p2 = pHead;
     33          //  while(p2->next != NULL)
     34          //    p2 = p2->next;
     35          //  p1=(Node *)osal_mem_alloc(sizeof(Node)); //申请新节点
     36          //  if(p1 == NULL)
     37          //  {
     38          //    //pruint8f("内存分配失败\n");
     39          //    return 0;
     40          //  }
     41          //  p2->next = p1;
     42          //  osal_memcmp(p1->extaddr,extaddr,8);
     43          //  
     44          //  p1->next = NULL;         //新节点的指针置为空
     45          //
     46          //  return pHead;           //返回链表的头指针
     47          //}
     48           
     49          /* 3.打印链表，链表的遍历*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     50          Node* searchfromList(Node *pHead , uint8 * extaddr)
   \                     searchfromList:
     51          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 0
   \   000005   8C..         MOV     ?V0 + 0,R4
   \   000007   8D..         MOV     ?V0 + 1,R5
     52            Node *p1;
     53            p1 = pHead;
   \   000009   EA           MOV     A,R2
   \   00000A   FE           MOV     R6,A
   \   00000B   EB           MOV     A,R3
   \   00000C   FF           MOV     R7,A
     54            if(NULL == p1)   //链表为空
   \   00000D   EE           MOV     A,R6
   \   00000E   4F           ORL     A,R7
   \   00000F   7014         JNZ     ??searchfromList_0
     55            {
     56              //pruint8f("Pruint8List函数执行，链表为空\n");
     57              return NULL;
   \                     ??searchfromList_1:
   \   000011   7A00         MOV     R2,#0x0
   \   000013   7B00         MOV     R3,#0x0
   \   000015   8050         SJMP    ??searchfromList_2
     58            }
     59            else
     60            {
     61              while(NULL != p1)
     62              {
     63                if(osal_memcmp(p1->extaddr,extaddr,8) == true){
     64                  p1->heartbeatCnt++;
     65                  return p1;
     66                }
     67                p1 = p1->next;
   \                     ??searchfromList_3:
   \   000017   EE           MOV     A,R6
   \   000018   240C         ADD     A,#0xc
   \   00001A   F582         MOV     DPL,A
   \   00001C   EF           MOV     A,R7
   \   00001D   12....       LCALL   ??Subroutine9_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000020   E0           MOVX    A,@DPTR
   \   000021   FE           MOV     R6,A
   \   000022   A3           INC     DPTR
   \   000023   E0           MOVX    A,@DPTR
   \   000024   FF           MOV     R7,A
   \                     ??searchfromList_0:
   \   000025   EE           MOV     A,R6
   \   000026   4F           ORL     A,R7
   \   000027   60E8         JZ      ??searchfromList_1
   \   000029                ; Setup parameters for call to function osal_memcmp
   \   000029   85....       MOV     ?V0 + 4,?V0 + 0
   \   00002C   85....       MOV     ?V0 + 5,?V0 + 1
   \   00002F   75..00       MOV     ?V0 + 6,#0x0
   \   000032   78..         MOV     R0,#?V0 + 4
   \   000034   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000037   7C08         MOV     R4,#0x8
   \   000039   7D00         MOV     R5,#0x0
   \   00003B   8E82         MOV     DPL,R6
   \   00003D   8F83         MOV     DPH,R7
   \   00003F   A3           INC     DPTR
   \   000040   A982         MOV     R1,DPL
   \   000042   AA83         MOV     R2,DPH
   \   000044   7B00         MOV     R3,#0x0
   \   000046   12....       LCALL   ??osal_memcmp?relay
   \   000049   7403         MOV     A,#0x3
   \   00004B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00004E   E9           MOV     A,R1
   \   00004F   6401         XRL     A,#0x1
   \   000051   70C4         JNZ     ??searchfromList_3
   \   000053   8E82         MOV     DPL,R6
   \   000055   8F83         MOV     DPH,R7
   \   000057   A3           INC     DPTR
   \   000058   A3           INC     DPTR
   \   000059   A3           INC     DPTR
   \   00005A   A3           INC     DPTR
   \   00005B   A3           INC     DPTR
   \   00005C   A3           INC     DPTR
   \   00005D   A3           INC     DPTR
   \   00005E   A3           INC     DPTR
   \   00005F   A3           INC     DPTR
   \   000060   E0           MOVX    A,@DPTR
   \   000061   04           INC     A
   \   000062   F0           MOVX    @DPTR,A
   \   000063   EE           MOV     A,R6
   \   000064   FA           MOV     R2,A
   \   000065   EF           MOV     A,R7
   \   000066   FB           MOV     R3,A
   \                     ??searchfromList_2:
   \   000067   7F07         MOV     R7,#0x7
   \   000069   02....       LJMP    ?BANKED_LEAVE_XDATA
     68              }
     69              return NULL;
     70            }
     71          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine9_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   22           RET
     72           
     73          /* 4.清除线性表L中的所有元素，即释放单链表L中所有的结点，使之成为一个空表 */
     74          //void clearList(Node *pHead)
     75          //{
     76          //  Node *pNext;            //定义一个与pHead相邻节点
     77          //  
     78          //  if(pHead == NULL)
     79          //  {
     80          //    //pruint8f("clearList函数执行，链表为空\n");
     81          //    return;
     82          //  }
     83          //  while(pHead->next != NULL)
     84          //  {
     85          //    pNext = pHead->next;//保存下一结点的指针
     86          //    osal_mem_free(pHead);
     87          //    pHead = pNext;      //表头下移
     88          //  }
     89          //  //pruint8f("clearList函数执行，链表已经清除\n");
     90          //}
     91           
     92          /* 5.返回单链表的长度 */
     93          //uint8 sizeList(Node *pHead)
     94          //{
     95          //  uint8 size = 0;
     96          //  
     97          //  while(pHead != NULL)
     98          //  {
     99          //    size++;         //遍历链表size大小比链表的实际长度小1
    100          //    pHead = pHead->next;
    101          //  }
    102          //  return size;    //链表的实际长度
    103          //}
    104           
    105          /* 6.检查单链表是否为空，若为空则返回１，否则返回０ */
    106          //uint8 isEmptyList(Node *pHead)
    107          //{
    108          //  if(pHead == NULL)
    109          //  {
    110          //    //pruint8f("isEmptyList函数执行，链表为空\n");
    111          //    return 1;
    112          //  }
    113          //  //pruint8f("isEmptyList函数执行，链表非空\n");
    114          //  
    115          //  return 0;
    116          //}
    117           
    118          /* 7.返回单链表中第pos个结点中的元素，若pos超出范围，则停止程序运行 */
    119          //elemType getElement(Node *pHead, uint8 pos)
    120          //{
    121          //  uint8 i=0;
    122          //  
    123          //  if(pos < 1)
    124          //  {
    125          //    //        pruint8f("getElement函数执行，pos值非法\n");
    126          //    return 0;
    127          //  }
    128          //  if(pHead == NULL)
    129          //  {
    130          //    //        pruint8f("getElement函数执行，链表为空\n");
    131          //    return 0;
    132          //    //exit(1);
    133          //  }
    134          //  while(pHead !=NULL)
    135          //  {
    136          //    ++i;
    137          //    if(i == pos)
    138          //    {
    139          //      break;
    140          //    }
    141          //    pHead = pHead->next; //移到下一结点
    142          //  }
    143          //  if(i < pos)                  //链表长度不足则退出
    144          //  {
    145          //    //        pruint8f("getElement函数执行，pos值超出链表长度\n");
    146          //    return 0;
    147          //  }
    148          //  
    149          //  return pHead->element;
    150          //}
    151          
    152          /* 8.从单链表中查找具有给定值x的第一个元素，若查找成功则返回该结点data域的存储地址，否则返回NULL */
    153          //elemType *getElemAddr(Node *pHead, elemType x)
    154          //{
    155          //    if(NULL == pHead)
    156          //    {
    157          ////        pruint8f("getElemAddr函数执行，链表为空\n");
    158          //        return NULL;
    159          //    }
    160          //    if(x < 0)
    161          //    {
    162          ////        pruint8f("getElemAddr函数执行，给定值X不合法\n");
    163          //        return NULL;
    164          //    }
    165          //    while((pHead->element != x) && (NULL != pHead->next)) //判断是否到链表末尾，以及是否存在所要找的元素
    166          //    {
    167          //        pHead = pHead->next;
    168          //    }
    169          //    if((pHead->element != x) && (pHead != NULL))
    170          //    {
    171          ////        pruint8f("getElemAddr函数执行，在链表中未找到x值\n");
    172          //        return NULL;
    173          //    }
    174          //    if(pHead->element == x)
    175          //    {
    176          ////        pruint8f("getElemAddr函数执行，元素 %d 的地址为 0x%x\n",x,&(pHead->element));
    177          //    }
    178          // 
    179          //    return &(pHead->element);//返回元素的地址
    180          //}
    181           
    182          /* 9.把单链表中第pos个结点的值修改为x的值，若修改成功返回１，否则返回０ */
    183          //uint8 modifyElem(Node *pNode,uint8 pos,elemType x)
    184          //{
    185          //    Node *pHead;
    186          //    pHead = pNode;
    187          //    uint8 i = 0;
    188          // 
    189          //    if(NULL == pHead)
    190          //    {
    191          ////        pruint8f("modifyElem函数执行，链表为空\n");
    192          //    }
    193          //    if(pos < 1)
    194          //    {
    195          ////        pruint8f("modifyElem函数执行，pos值非法\n");
    196          //        return 0;
    197          //    }
    198          //    while(pHead !=NULL)
    199          //    {
    200          //        ++i;
    201          //        if(i == pos)
    202          //        {
    203          //            break;
    204          //        }
    205          //        pHead = pHead->next; //移到下一结点
    206          //    }
    207          //    if(i < pos)                  //链表长度不足则退出
    208          //    {
    209          ////        pruint8f("modifyElem函数执行，pos值超出链表长度\n");
    210          //        return 0;
    211          //    }
    212          //    pNode = pHead;
    213          //    pNode->element = x;
    214          ////    pruint8f("modifyElem函数执行\n");
    215          //     
    216          //    return 1;
    217          //}
    218           
    219          /* 10.向单链表的表头插入一个元素 */
    220          //uint8 insertHeadList(Node **pNode,elemType insertElem)
    221          //{
    222          //  Node *pInsert;
    223          //  pInsert = (Node *)osal_mem_alloc(sizeof(Node));
    224          //  osal_memset(pInsert,0,sizeof(Node));
    225          //  pInsert->element = insertElem;
    226          //  pInsert->next = *pNode;
    227          //  *pNode = pInsert;
    228          //  //pruint8f("insertHeadList函数执行，向表头插入元素成功\n");
    229          //  
    230          //  return 1;
    231          //}
    232          
    233          /* 11.向单链表的末尾添加一个元素 */
    234          //uint8 insertLastList(Node *pNode,elemType insertElem)
    235          //{
    236          //  Node *pInsert;
    237          //  Node *pHead;
    238          //  Node *pTmp; //定义一个临时链表用来存放第一个节点
    239          //  
    240          //  pHead = pNode;
    241          //  pTmp = pHead;
    242          //  pInsert = (Node *)osal_mem_alloc(sizeof(Node)); //申请一个新节点
    243          //  osal_memset(pInsert,0,sizeof(Node));
    244          //  pInsert->element = insertElem;
    245          //  
    246          //  while(pHead->next != NULL)
    247          //  {
    248          //    pHead = pHead->next;
    249          //  }
    250          //  pHead->next = pInsert;   //将链表末尾节点的下一结点指向新添加的节点
    251          ////  pNode = pTmp;
    252          //  //pruint8f("insertLastList函数执行，向表尾插入元素成功\n");
    253          //  
    254          //  return 1;
    255          //}
    256          
    257          /************
    258          * insertLastList 
    259          * 担 pHeadl^； extaddrOmac
    260          * 返回：0不能分配空g添加O湫畔，1成功添加O
    261          ***************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    262          uint8 insertLastList(Node **pHead , uint8 * extaddr)
   \                     insertLastList:
    263          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV     A,#-0x10
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 8,R4
   \   000010   8D..         MOV     ?V0 + 9,R5
    264            uint8 asc_16[16]={'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
   \   000012   85..82       MOV     DPL,?XSP + 0
   \   000015   85..83       MOV     DPH,?XSP + 1
   \   000018   AC82         MOV     R4,DPL
   \   00001A   AD83         MOV     R5,DPH
   \   00001C   7583..       MOV     DPH,#(`?<Constant {48, 49, 50, 51, 52, 53, 54, 55, 56` >> 8) & 0xff
   \   00001F   7582..       MOV     DPL,#`?<Constant {48, 49, 50, 51, 52, 53, 54, 55, 56` & 0xff
   \   000022   7410         MOV     A,#0x10
   \   000024   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    265            uint8 i;
    266            Node *p1,*p2,*tp;
    267            p2 = *pHead;
   \   000027   8E82         MOV     DPL,R6
   \   000029   8F83         MOV     DPH,R7
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F8           MOV     R0,A
   \   00002D   A3           INC     DPTR
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   F9           MOV     R1,A
   \   000030   88..         MOV     ?V0 + 4,R0
   \   000032   89..         MOV     ?V0 + 5,R1
    268            tp = p2;
   \   000034   88..         MOV     ?V0 + 2,R0
   \   000036   F5..         MOV     ?V0 + 3,A
    269            if(*pHead == NULL){
   \   000038   E8           MOV     A,R0
   \   000039   49           ORL     A,R1
   \   00003A   6003         JZ      $+5
   \   00003C   02....       LJMP    ??insertLastList_0 & 0xFFFF
    270              (*pHead)=(Node *)osal_mem_alloc(sizeof(Node)); //申请新节点
   \   00003F                ; Setup parameters for call to function osal_mem_alloc
   \   00003F   7A10         MOV     R2,#0x10
   \   000041   7B00         MOV     R3,#0x0
   \   000043   12....       LCALL   ??osal_mem_alloc?relay
   \   000046   8E82         MOV     DPL,R6
   \   000048   8F83         MOV     DPH,R7
   \   00004A   EA           MOV     A,R2
   \   00004B   F0           MOVX    @DPTR,A
   \   00004C   A3           INC     DPTR
   \   00004D   EB           MOV     A,R3
   \   00004E   12....       LCALL   ??Subroutine10_0 & 0xFFFF
    271              if((*pHead) == NULL)
   \                     ??CrossCallReturnLabel_22:
   \   000051   F8           MOV     R0,A
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   F9           MOV     R1,A
   \   000055   E8           MOV     A,R0
   \   000056   49           ORL     A,R1
   \   000057   700C         JNZ     ??insertLastList_1
    272                return 2 ;  //返回error
   \                     ??insertLastList_2:
   \   000059   7902         MOV     R1,#0x2
   \                     ??insertLastList_3:
   \   00005B   7410         MOV     A,#0x10
   \   00005D   12....       LCALL   ?DEALLOC_XSTACK8
   \   000060   7F0A         MOV     R7,#0xa
   \   000062   02....       LJMP    ?BANKED_LEAVE_XDATA
    273              (*pHead)->element = 1;
   \                     ??insertLastList_1:
   \   000065   8E82         MOV     DPL,R6
   \   000067   8F83         MOV     DPH,R7
   \   000069   A3           INC     DPTR
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   F583         MOV     DPH,A
   \   00006D   8882         MOV     DPL,R0
   \   00006F   7401         MOV     A,#0x1
   \   000071   12....       LCALL   ?Subroutine1 & 0xFFFF
    274              (*pHead)->heartbeatCnt = 0;
   \                     ??CrossCallReturnLabel_2:
   \   000074   E4           CLR     A
   \   000075   12....       LCALL   ?Subroutine1 & 0xFFFF
    275              (*pHead)->heartbeatCntOld = 0;
   \                     ??CrossCallReturnLabel_3:
   \   000078   A3           INC     DPTR
   \   000079   12....       LCALL   ?Subroutine3 & 0xFFFF
    276              (*pHead)->detectHeartbeatCnt = 0;
   \                     ??CrossCallReturnLabel_20:
   \   00007C   240B         ADD     A,#0xb
   \   00007E   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   000081   12....       LCALL   ?Subroutine3 & 0xFFFF
    277              (*pHead)->next = NULL;
   \                     ??CrossCallReturnLabel_21:
   \   000084   240C         ADD     A,#0xc
   \   000086   12....       LCALL   ??Subroutine8_0 & 0xFFFF
    278              (*pHead)->prior = NULL;
   \                     ??CrossCallReturnLabel_8:
   \   000089   8E82         MOV     DPL,R6
   \   00008B   8F83         MOV     DPH,R7
   \   00008D   12....       LCALL   ?Subroutine2 & 0xFFFF
    279              osal_memcpy((*pHead)->extaddr,extaddr,8);
   \                     ??CrossCallReturnLabel_10:
   \   000090                ; Setup parameters for call to function osal_memcpy
   \   000090   85....       MOV     ?V0 + 0,?V0 + 8
   \   000093   85....       MOV     ?V0 + 1,?V0 + 9
   \   000096   F5..         MOV     ?V0 + 2,A
   \   000098   78..         MOV     R0,#?V0 + 0
   \   00009A   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00009D   7C08         MOV     R4,#0x8
   \   00009F   7D00         MOV     R5,#0x0
   \   0000A1   8E82         MOV     DPL,R6
   \   0000A3   8F83         MOV     DPH,R7
   \   0000A5   E0           MOVX    A,@DPTR
   \   0000A6   2401         ADD     A,#0x1
   \   0000A8   FA           MOV     R2,A
   \   0000A9   A3           INC     DPTR
   \   0000AA   E0           MOVX    A,@DPTR
   \   0000AB   3400         ADDC    A,#0x0
   \   0000AD   FB           MOV     R3,A
   \   0000AE   12....       LCALL   ??osal_memcpy?relay
   \   0000B1   7403         MOV     A,#0x3
   \   0000B3   12....       LCALL   ?DEALLOC_XSTACK8
    280              if(1)//uart test
    281              {
    282                HalUARTWrite(0,"\r\naddMac:",9);
   \   0000B6                ; Setup parameters for call to function HalUARTWrite
   \   0000B6   7C09         MOV     R4,#0x9
   \   0000B8   7D00         MOV     R5,#0x0
   \   0000BA   7A..         MOV     R2,#`?<Constant "\\r\\naddMac:">` & 0xff
   \   0000BC   7B..         MOV     R3,#(`?<Constant "\\r\\naddMac:">` >> 8) & 0xff
   \   0000BE   7900         MOV     R1,#0x0
   \   0000C0   12....       LCALL   ??HalUARTWrite?relay
    283                for(i=0;i<8;i++)
   \   0000C3   75..00       MOV     ?V0 + 0,#0x0
    284                {
    285                  HalUARTWrite(0,&asc_16[extaddr[i]%256/16],1);
   \                     ??insertLastList_4:
   \   0000C6   12....       LCALL   ?Subroutine0 & 0xFFFF
    286                  HalUARTWrite(0,&asc_16[extaddr[i]%16],1);  
    287                }
   \                     ??CrossCallReturnLabel_0:
   \   0000C9   40FB         JC      ??insertLastList_4
    288                HalUARTWrite(0,"\n",1);
   \                     ??insertLastList_5:
   \   0000CB                ; Setup parameters for call to function HalUARTWrite
   \   0000CB   7C01         MOV     R4,#0x1
   \   0000CD   7D00         MOV     R5,#0x0
   \   0000CF   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   0000D1   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   0000D3   7900         MOV     R1,#0x0
   \   0000D5   12....       LCALL   ??HalUARTWrite?relay
    289              }
    290              NewMacUpate = 1;
   \   0000D8   90....       MOV     DPTR,#NewMacUpate
   \   0000DB   7401         MOV     A,#0x1
   \   0000DD   F0           MOVX    @DPTR,A
    291              return 1;           //返回ok
   \   0000DE   F9           MOV     R1,A
   \   0000DF   02....       LJMP    ??insertLastList_3 & 0xFFFF
    292            }
    293            while(p2->next != NULL)
    294              p2 = p2->next;
   \                     ??insertLastList_6:
   \   0000E2   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   0000E5   E0           MOVX    A,@DPTR
   \   0000E6   F5..         MOV     ?V0 + 4,A
   \   0000E8   A3           INC     DPTR
   \   0000E9   E0           MOVX    A,@DPTR
   \   0000EA   F5..         MOV     ?V0 + 5,A
   \                     ??insertLastList_0:
   \   0000EC   E5..         MOV     A,?V0 + 4
   \   0000EE   240C         ADD     A,#0xc
   \   0000F0   F582         MOV     DPL,A
   \   0000F2   E5..         MOV     A,?V0 + 5
   \   0000F4   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   0000F7   F9           MOV     R1,A
   \   0000F8   E8           MOV     A,R0
   \   0000F9   49           ORL     A,R1
   \   0000FA   70E6         JNZ     ??insertLastList_6
    295            p1=(Node *)osal_mem_alloc(sizeof(Node)); //申请新节点
   \   0000FC                ; Setup parameters for call to function osal_mem_alloc
   \   0000FC   7A10         MOV     R2,#0x10
   \   0000FE   7B00         MOV     R3,#0x0
   \   000100   12....       LCALL   ??osal_mem_alloc?relay
   \   000103   8A..         MOV     ?V0 + 0,R2
   \   000105   8B..         MOV     ?V0 + 1,R3
    296            if(p1 == NULL)
   \   000107   EA           MOV     A,R2
   \   000108   45..         ORL     A,?V0 + 1
   \   00010A   7010         JNZ     ??insertLastList_7
    297            {
    298              //pruint8f("内存分配失败\n");
    299              HalUARTWrite(0,"\r\nlist memalloc error",21);
   \   00010C                ; Setup parameters for call to function HalUARTWrite
   \   00010C   7C15         MOV     R4,#0x15
   \   00010E   7D00         MOV     R5,#0x0
   \   000110   7A..         MOV     R2,#`?<Constant "\\r\\nlist memalloc error">` & 0xff
   \   000112   7B..         MOV     R3,#(`?<Constant "\\r\\nlist memalloc error">` >> 8) & 0xff
   \   000114   7900         MOV     R1,#0x0
   \   000116   12....       LCALL   ??HalUARTWrite?relay
    300              return 2;         //返回error
   \   000119   02....       LJMP    ??insertLastList_2 & 0xFFFF
    301            }
    302            p1->element = 1;
   \                     ??insertLastList_7:
   \   00011C   8A82         MOV     DPL,R2
   \   00011E   8B83         MOV     DPH,R3
   \   000120   7401         MOV     A,#0x1
   \   000122   F0           MOVX    @DPTR,A
    303            p1->heartbeatCnt = 0;
   \   000123   A3           INC     DPTR
   \   000124   A3           INC     DPTR
   \   000125   A3           INC     DPTR
   \   000126   A3           INC     DPTR
   \   000127   A3           INC     DPTR
   \   000128   A3           INC     DPTR
   \   000129   A3           INC     DPTR
   \   00012A   A3           INC     DPTR
   \   00012B   A3           INC     DPTR
   \   00012C   E4           CLR     A
   \   00012D   F0           MOVX    @DPTR,A
    304            p1->heartbeatCntOld = 0;
   \   00012E   8A82         MOV     DPL,R2
   \   000130   8B83         MOV     DPH,R3
   \   000132   A3           INC     DPTR
   \   000133   A3           INC     DPTR
   \   000134   A3           INC     DPTR
   \   000135   A3           INC     DPTR
   \   000136   A3           INC     DPTR
   \   000137   A3           INC     DPTR
   \   000138   A3           INC     DPTR
   \   000139   A3           INC     DPTR
   \   00013A   A3           INC     DPTR
   \   00013B   A3           INC     DPTR
   \   00013C   F0           MOVX    @DPTR,A
    305            p1->detectHeartbeatCnt = 0;
   \   00013D   EA           MOV     A,R2
   \   00013E   240B         ADD     A,#0xb
   \   000140   F582         MOV     DPL,A
   \   000142   EB           MOV     A,R3
   \   000143   12....       LCALL   ??Subroutine9_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   000146   E4           CLR     A
   \   000147   F0           MOVX    @DPTR,A
    306            p2->next = p1;
   \   000148   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   00014B   EA           MOV     A,R2
   \   00014C   F0           MOVX    @DPTR,A
   \   00014D   A3           INC     DPTR
   \   00014E   EB           MOV     A,R3
   \   00014F   F0           MOVX    @DPTR,A
    307            p1->prior = p2;
   \   000150   EA           MOV     A,R2
   \   000151   240E         ADD     A,#0xe
   \   000153   F582         MOV     DPL,A
   \   000155   EB           MOV     A,R3
   \   000156   12....       LCALL   ??Subroutine9_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   000159   E5..         MOV     A,?V0 + 4
   \   00015B   F0           MOVX    @DPTR,A
   \   00015C   A3           INC     DPTR
   \   00015D   E5..         MOV     A,?V0 + 5
   \   00015F   F0           MOVX    @DPTR,A
    308            osal_memcpy(p1->extaddr,extaddr,8);
   \   000160                ; Setup parameters for call to function osal_memcpy
   \   000160   85....       MOV     ?V0 + 4,?V0 + 8
   \   000163   85....       MOV     ?V0 + 5,?V0 + 9
   \   000166   75..00       MOV     ?V0 + 6,#0x0
   \   000169   78..         MOV     R0,#?V0 + 4
   \   00016B   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00016E   7C08         MOV     R4,#0x8
   \   000170   7D00         MOV     R5,#0x0
   \   000172   8A82         MOV     DPL,R2
   \   000174   8B83         MOV     DPH,R3
   \   000176   A3           INC     DPTR
   \   000177   AA82         MOV     R2,DPL
   \   000179   AB83         MOV     R3,DPH
   \   00017B   12....       LCALL   ??osal_memcpy?relay
   \   00017E   7403         MOV     A,#0x3
   \   000180   12....       LCALL   ?DEALLOC_XSTACK8
    309            
    310            p1->next = NULL;         //新节点的指针置为空
   \   000183   E5..         MOV     A,?V0 + 0
   \   000185   240C         ADD     A,#0xc
   \   000187   F582         MOV     DPL,A
   \   000189   E5..         MOV     A,?V0 + 1
   \   00018B   12....       LCALL   ??Subroutine9_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   00018E   E4           CLR     A
   \   00018F   F0           MOVX    @DPTR,A
   \   000190   A3           INC     DPTR
   \   000191   F0           MOVX    @DPTR,A
    311            *pHead = tp;
   \   000192   8E82         MOV     DPL,R6
   \   000194   8F83         MOV     DPH,R7
   \   000196   E5..         MOV     A,?V0 + 2
   \   000198   F0           MOVX    @DPTR,A
   \   000199   A3           INC     DPTR
   \   00019A   E5..         MOV     A,?V0 + 3
   \   00019C   F0           MOVX    @DPTR,A
    312            if(1)//uart test
    313            {
    314              HalUARTWrite(0,"\r\naddMac:",9);
   \   00019D                ; Setup parameters for call to function HalUARTWrite
   \   00019D   7C09         MOV     R4,#0x9
   \   00019F   7D00         MOV     R5,#0x0
   \   0001A1   7A..         MOV     R2,#`?<Constant "\\r\\naddMac:">` & 0xff
   \   0001A3   7B..         MOV     R3,#(`?<Constant "\\r\\naddMac:">` >> 8) & 0xff
   \   0001A5   7900         MOV     R1,#0x0
   \   0001A7   12....       LCALL   ??HalUARTWrite?relay
    315              for(i=0;i<8;i++)
   \   0001AA   75..00       MOV     ?V0 + 0,#0x0
    316              {
    317                HalUARTWrite(0,&asc_16[extaddr[i]%256/16],1);
   \                     ??insertLastList_8:
   \   0001AD   12....       LCALL   ?Subroutine0 & 0xFFFF
    318                HalUARTWrite(0,&asc_16[extaddr[i]%16],1);  
    319              }
    320              HalUARTWrite(0,"\n",1);
    321            }
   \                     ??CrossCallReturnLabel_1:
   \   0001B0   4003         JC      $+5
   \   0001B2   02....       LJMP    ??insertLastList_5 & 0xFFFF
   \   0001B5   80F6         SJMP    ??insertLastList_8
    322            NewMacUpate = 1;
    323            return 1;           //返回ok
    324          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   E5..         MOV     A,?V0 + 4
   \   000002   240C         ADD     A,#0xc
   \   000004   F582         MOV     DPL,A
   \   000006   E5..         MOV     A,?V0 + 5
   \   000008                REQUIRE ??Subroutine9_0
   \   000008                ; // Fall through to label ??Subroutine9_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   E4           CLR     A
   \   000001                REQUIRE ??Subroutine10_0
   \   000001                ; // Fall through to label ??Subroutine10_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine10_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8E82         MOV     DPL,R6
   \   000003   8F83         MOV     DPH,R7
   \   000005   E0           MOVX    A,@DPTR
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8E82         MOV     DPL,R6
   \   000003   8F83         MOV     DPH,R7
   \   000005   E0           MOVX    A,@DPTR
   \   000006   F8           MOV     R0,A
   \   000007   A3           INC     DPTR
   \   000008   E0           MOVX    A,@DPTR
   \   000009   F583         MOV     DPH,A
   \   00000B   8882         MOV     DPL,R0
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   A3           INC     DPTR
   \   000011   A3           INC     DPTR
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   85....       MOV     ?V0 + 2,?V0 + 0
   \   000003   E5..         MOV     A,?V0 + 8
   \   000005   25..         ADD     A,?V0 + 2
   \   000007   FE           MOV     R6,A
   \   000008   E5..         MOV     A,?V0 + 9
   \   00000A   3400         ADDC    A,#0x0
   \   00000C   FF           MOV     R7,A
   \   00000D                ; Setup parameters for call to function HalUARTWrite
   \   00000D                ; Setup parameters for call to function HalUARTWrite
   \   00000D   7C01         MOV     R4,#0x1
   \   00000F   7D00         MOV     R5,#0x0
   \   000011   8E82         MOV     DPL,R6
   \   000013   8F83         MOV     DPH,R7
   \   000015   E0           MOVX    A,@DPTR
   \   000016   C4           SWAP    A
   \   000017   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   00001A                ; Setup parameters for call to function HalUARTWrite
   \   00001A                ; Setup parameters for call to function HalUARTWrite
   \   00001A   7C01         MOV     R4,#0x1
   \   00001C   7D00         MOV     R5,#0x0
   \   00001E   8E82         MOV     DPL,R6
   \   000020   8F83         MOV     DPH,R7
   \   000022   E0           MOVX    A,@DPTR
   \   000023   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000026   05..         INC     ?V0 + 0
   \   000028   E5..         MOV     A,?V0 + 0
   \   00002A   C3           CLR     C
   \   00002B   9408         SUBB    A,#0x8
   \   00002D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   540F         ANL     A,#0xf
   \   000002   F8           MOV     R0,A
   \   000003   85..82       MOV     DPL,?XSP + 0
   \   000006   85..83       MOV     DPH,?XSP + 1
   \   000009   E582         MOV     A,DPL
   \   00000B   28           ADD     A,R0
   \   00000C   FA           MOV     R2,A
   \   00000D   E583         MOV     A,DPH
   \   00000F   3400         ADDC    A,#0x0
   \   000011   FB           MOV     R3,A
   \   000012   7900         MOV     R1,#0x0
   \   000014   12....       LCALL   ??HalUARTWrite?relay
   \   000017   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F8           MOV     R0,A
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET
    325          #pragma optimize=none

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    326          uint8 detectHandle(Node **pNode)//三秒扫描一次 如果计数超过MAX_MISS_HEARTBEAT_CNT的设备将被移除list并串口发送出设备mac信息
   \                     detectHandle:
    327          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV     A,#-0x10
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 6,R2
   \   00000C   8B..         MOV     ?V0 + 7,R3
    328            uint8 asc_16[16]={'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
   \   00000E   90....       MOV     DPTR,#`?<Constant {48, 49, 50, 51, 52, 53, 54, 55, 56_1`
   \   000011   C082         PUSH    DPL
   \   000013   C083         PUSH    DPH
   \   000015   85..82       MOV     DPL,?XSP + 0
   \   000018   85..83       MOV     DPH,?XSP + 1
   \   00001B   AC82         MOV     R4,DPL
   \   00001D   AD83         MOV     R5,DPH
   \   00001F   D083         POP     DPH
   \   000021   D082         POP     DPL
   \   000023   7410         MOV     A,#0x10
   \   000025   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    329            uint8 i;
    330            Node *p1,*p2,*p3;
    331            p1 = *pNode;
   \   000028   85..82       MOV     DPL,?V0 + 6
   \   00002B   85..83       MOV     DPH,?V0 + 7
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   F8           MOV     R0,A
   \   000030   A3           INC     DPTR
   \   000031   E0           MOVX    A,@DPTR
   \   000032   F9           MOV     R1,A
   \   000033   E8           MOV     A,R0
   \   000034   FE           MOV     R6,A
   \   000035   E9           MOV     A,R1
   \   000036   FF           MOV     R7,A
    332            p2 = p1;
   \   000037   8E..         MOV     ?V0 + 0,R6
   \   000039   8F..         MOV     ?V0 + 1,R7
    333            while(p1 != NULL){
   \                     ??detectHandle_0:
   \   00003B   EE           MOV     A,R6
   \   00003C   4F           ORL     A,R7
   \   00003D   7003         JNZ     $+5
   \   00003F   02....       LJMP    ??detectHandle_1 & 0xFFFF
    334              if(p1->heartbeatCnt == p1->heartbeatCntOld)
   \   000042   8E82         MOV     DPL,R6
   \   000044   8F83         MOV     DPH,R7
   \   000046   A3           INC     DPTR
   \   000047   A3           INC     DPTR
   \   000048   A3           INC     DPTR
   \   000049   A3           INC     DPTR
   \   00004A   A3           INC     DPTR
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   F8           MOV     R0,A
   \   000051   8E82         MOV     DPL,R6
   \   000053   8F83         MOV     DPH,R7
   \   000055   A3           INC     DPTR
   \   000056   A3           INC     DPTR
   \   000057   A3           INC     DPTR
   \   000058   A3           INC     DPTR
   \   000059   A3           INC     DPTR
   \   00005A   A3           INC     DPTR
   \   00005B   A3           INC     DPTR
   \   00005C   A3           INC     DPTR
   \   00005D   A3           INC     DPTR
   \   00005E   A3           INC     DPTR
   \   00005F   E0           MOVX    A,@DPTR
   \   000060   68           XRL     A,R0
   \   000061   7010         JNZ     ??detectHandle_2
    335                p1->detectHeartbeatCnt++;
   \   000063   EE           MOV     A,R6
   \   000064   240B         ADD     A,#0xb
   \   000066   F582         MOV     DPL,A
   \   000068   EF           MOV     A,R7
   \   000069   3400         ADDC    A,#0x0
   \   00006B   F583         MOV     DPH,A
   \   00006D   E0           MOVX    A,@DPTR
   \   00006E   2401         ADD     A,#0x1
   \   000070   F0           MOVX    @DPTR,A
   \   000071   802A         SJMP    ??detectHandle_3
    336              else{
    337                p1->heartbeatCntOld = p1->heartbeatCnt;
   \                     ??detectHandle_2:
   \   000073   8E82         MOV     DPL,R6
   \   000075   8F83         MOV     DPH,R7
   \   000077   A3           INC     DPTR
   \   000078   A3           INC     DPTR
   \   000079   A3           INC     DPTR
   \   00007A   A3           INC     DPTR
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   A3           INC     DPTR
   \   00007E   A3           INC     DPTR
   \   00007F   A3           INC     DPTR
   \   000080   E0           MOVX    A,@DPTR
   \   000081   8E82         MOV     DPL,R6
   \   000083   8F83         MOV     DPH,R7
   \   000085   A3           INC     DPTR
   \   000086   A3           INC     DPTR
   \   000087   A3           INC     DPTR
   \   000088   A3           INC     DPTR
   \   000089   A3           INC     DPTR
   \   00008A   A3           INC     DPTR
   \   00008B   A3           INC     DPTR
   \   00008C   A3           INC     DPTR
   \   00008D   A3           INC     DPTR
   \   00008E   A3           INC     DPTR
   \   00008F   F0           MOVX    @DPTR,A
    338                p1->detectHeartbeatCnt = 0;
   \   000090   EE           MOV     A,R6
   \   000091   240B         ADD     A,#0xb
   \   000093   F582         MOV     DPL,A
   \   000095   EF           MOV     A,R7
   \   000096   3400         ADDC    A,#0x0
   \   000098   F583         MOV     DPH,A
   \   00009A   7400         MOV     A,#0x0
   \   00009C   F0           MOVX    @DPTR,A
    339              }
    340              if(p1->detectHeartbeatCnt >= MAX_MISS_HEARTBEAT_CNT){
   \                     ??detectHandle_3:
   \   00009D   EE           MOV     A,R6
   \   00009E   240B         ADD     A,#0xb
   \   0000A0   F582         MOV     DPL,A
   \   0000A2   EF           MOV     A,R7
   \   0000A3   3400         ADDC    A,#0x0
   \   0000A5   F583         MOV     DPH,A
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   C3           CLR     C
   \   0000A9   9403         SUBB    A,#0x3
   \   0000AB   5003         JNC     $+5
   \   0000AD   02....       LJMP    ??detectHandle_4 & 0xFFFF
    341                HalUARTWrite(0,"deleteMAC:",10);
   \   0000B0                ; Setup parameters for call to function HalUARTWrite
   \   0000B0   7C0A         MOV     R4,#0xa
   \   0000B2   7D00         MOV     R5,#0x0
   \   0000B4   7A..         MOV     R2,#`?<Constant "deleteMAC:">` & 0xff
   \   0000B6   7B..         MOV     R3,#(`?<Constant "deleteMAC:">` >> 8) & 0xff
   \   0000B8   7900         MOV     R1,#0x0
   \   0000BA   12....       LCALL   ??HalUARTWrite?relay
    342                for(i=0;i<8;i++)
   \   0000BD   75..00       MOV     ?V0 + 2,#0x0
   \                     ??detectHandle_5:
   \   0000C0   E5..         MOV     A,?V0 + 2
   \   0000C2   C3           CLR     C
   \   0000C3   9408         SUBB    A,#0x8
   \   0000C5   507C         JNC     ??detectHandle_6
    343                {
    344                  HalUARTWrite(0,&asc_16[((Node*)p1)->extaddr[i]%256/16],1);  
   \   0000C7                ; Setup parameters for call to function HalUARTWrite
   \   0000C7   7C01         MOV     R4,#0x1
   \   0000C9   7D00         MOV     R5,#0x0
   \   0000CB   85....       MOV     ?V0 + 8,?V0 + 2
   \   0000CE   75..00       MOV     ?V0 + 9,#0x0
   \   0000D1   EE           MOV     A,R6
   \   0000D2   25..         ADD     A,?V0 + 8
   \   0000D4   F582         MOV     DPL,A
   \   0000D6   EF           MOV     A,R7
   \   0000D7   35..         ADDC    A,?V0 + 9
   \   0000D9   F583         MOV     DPH,A
   \   0000DB   A3           INC     DPTR
   \   0000DC   E0           MOVX    A,@DPTR
   \   0000DD   F8           MOV     R0,A
   \   0000DE   7900         MOV     R1,#0x0
   \   0000E0   7A00         MOV     R2,#0x0
   \   0000E2   7B01         MOV     R3,#0x1
   \   0000E4   12....       LCALL   ?S_DIV_MOD
   \   0000E7   EA           MOV     A,R2
   \   0000E8   F8           MOV     R0,A
   \   0000E9   EB           MOV     A,R3
   \   0000EA   F9           MOV     R1,A
   \   0000EB   7A10         MOV     R2,#0x10
   \   0000ED   7B00         MOV     R3,#0x0
   \   0000EF   12....       LCALL   ?S_DIV_MOD
   \   0000F2   88..         MOV     ?V0 + 8,R0
   \   0000F4   89..         MOV     ?V0 + 9,R1
   \   0000F6   85..82       MOV     DPL,?XSP + 0
   \   0000F9   85..83       MOV     DPH,?XSP + 1
   \   0000FC   E582         MOV     A,DPL
   \   0000FE   25..         ADD     A,?V0 + 8
   \   000100   FA           MOV     R2,A
   \   000101   E583         MOV     A,DPH
   \   000103   35..         ADDC    A,?V0 + 9
   \   000105   FB           MOV     R3,A
   \   000106   7900         MOV     R1,#0x0
   \   000108   12....       LCALL   ??HalUARTWrite?relay
    345                  HalUARTWrite(0,&asc_16[((Node*)p1)->extaddr[i]%16],1); 
   \   00010B                ; Setup parameters for call to function HalUARTWrite
   \   00010B   7C01         MOV     R4,#0x1
   \   00010D   7D00         MOV     R5,#0x0
   \   00010F   85....       MOV     ?V0 + 8,?V0 + 2
   \   000112   75..00       MOV     ?V0 + 9,#0x0
   \   000115   EE           MOV     A,R6
   \   000116   25..         ADD     A,?V0 + 8
   \   000118   F582         MOV     DPL,A
   \   00011A   EF           MOV     A,R7
   \   00011B   35..         ADDC    A,?V0 + 9
   \   00011D   F583         MOV     DPH,A
   \   00011F   A3           INC     DPTR
   \   000120   E0           MOVX    A,@DPTR
   \   000121   75F010       MOV     B,#0x10
   \   000124   84           DIV     AB
   \   000125   E5F0         MOV     A,B
   \   000127   A8F0         MOV     R0,B
   \   000129   7900         MOV     R1,#0x0
   \   00012B   85..82       MOV     DPL,?XSP + 0
   \   00012E   85..83       MOV     DPH,?XSP + 1
   \   000131   E582         MOV     A,DPL
   \   000133   28           ADD     A,R0
   \   000134   FA           MOV     R2,A
   \   000135   E583         MOV     A,DPH
   \   000137   39           ADDC    A,R1
   \   000138   FB           MOV     R3,A
   \   000139   7900         MOV     R1,#0x0
   \   00013B   12....       LCALL   ??HalUARTWrite?relay
    346                }
   \   00013E   05..         INC     ?V0 + 2
   \   000140   02....       LJMP    ??detectHandle_5 & 0xFFFF
    347                HalUARTWrite(0,"\r\n",2);
   \                     ??detectHandle_6:
   \   000143                ; Setup parameters for call to function HalUARTWrite
   \   000143   7C02         MOV     R4,#0x2
   \   000145   7D00         MOV     R5,#0x0
   \   000147   7A..         MOV     R2,#`?<Constant "\\r\\n">` & 0xff
   \   000149   7B..         MOV     R3,#(`?<Constant "\\r\\n">` >> 8) & 0xff
   \   00014B   7900         MOV     R1,#0x0
   \   00014D   12....       LCALL   ??HalUARTWrite?relay
    348                
    349                p1->detectHeartbeatCnt = 0;
   \   000150   EE           MOV     A,R6
   \   000151   240B         ADD     A,#0xb
   \   000153   F582         MOV     DPL,A
   \   000155   EF           MOV     A,R7
   \   000156   3400         ADDC    A,#0x0
   \   000158   F583         MOV     DPH,A
   \   00015A   7400         MOV     A,#0x0
   \   00015C   F0           MOVX    @DPTR,A
    350                p1->prior->next = p1->next;
   \   00015D   EE           MOV     A,R6
   \   00015E   240C         ADD     A,#0xc
   \   000160   F582         MOV     DPL,A
   \   000162   EF           MOV     A,R7
   \   000163   3400         ADDC    A,#0x0
   \   000165   F583         MOV     DPH,A
   \   000167   E0           MOVX    A,@DPTR
   \   000168   FA           MOV     R2,A
   \   000169   A3           INC     DPTR
   \   00016A   E0           MOVX    A,@DPTR
   \   00016B   FB           MOV     R3,A
   \   00016C   EE           MOV     A,R6
   \   00016D   240E         ADD     A,#0xe
   \   00016F   F582         MOV     DPL,A
   \   000171   EF           MOV     A,R7
   \   000172   3400         ADDC    A,#0x0
   \   000174   F583         MOV     DPH,A
   \   000176   E0           MOVX    A,@DPTR
   \   000177   240C         ADD     A,#0xc
   \   000179   F8           MOV     R0,A
   \   00017A   A3           INC     DPTR
   \   00017B   E0           MOVX    A,@DPTR
   \   00017C   3400         ADDC    A,#0x0
   \   00017E   F9           MOV     R1,A
   \   00017F   8882         MOV     DPL,R0
   \   000181   8983         MOV     DPH,R1
   \   000183   EA           MOV     A,R2
   \   000184   F0           MOVX    @DPTR,A
   \   000185   A3           INC     DPTR
   \   000186   EB           MOV     A,R3
   \   000187   F0           MOVX    @DPTR,A
    351                p1->next->prior = p1->prior;
   \   000188   EE           MOV     A,R6
   \   000189   240E         ADD     A,#0xe
   \   00018B   F582         MOV     DPL,A
   \   00018D   EF           MOV     A,R7
   \   00018E   3400         ADDC    A,#0x0
   \   000190   F583         MOV     DPH,A
   \   000192   E0           MOVX    A,@DPTR
   \   000193   FA           MOV     R2,A
   \   000194   A3           INC     DPTR
   \   000195   E0           MOVX    A,@DPTR
   \   000196   FB           MOV     R3,A
   \   000197   EE           MOV     A,R6
   \   000198   240C         ADD     A,#0xc
   \   00019A   F582         MOV     DPL,A
   \   00019C   EF           MOV     A,R7
   \   00019D   3400         ADDC    A,#0x0
   \   00019F   F583         MOV     DPH,A
   \   0001A1   E0           MOVX    A,@DPTR
   \   0001A2   240E         ADD     A,#0xe
   \   0001A4   F8           MOV     R0,A
   \   0001A5   A3           INC     DPTR
   \   0001A6   E0           MOVX    A,@DPTR
   \   0001A7   3400         ADDC    A,#0x0
   \   0001A9   F9           MOV     R1,A
   \   0001AA   8882         MOV     DPL,R0
   \   0001AC   8983         MOV     DPH,R1
   \   0001AE   EA           MOV     A,R2
   \   0001AF   F0           MOVX    @DPTR,A
   \   0001B0   A3           INC     DPTR
   \   0001B1   EB           MOV     A,R3
   \   0001B2   F0           MOVX    @DPTR,A
    352                p3 = p1->next;
   \   0001B3   EE           MOV     A,R6
   \   0001B4   240C         ADD     A,#0xc
   \   0001B6   F582         MOV     DPL,A
   \   0001B8   EF           MOV     A,R7
   \   0001B9   3400         ADDC    A,#0x0
   \   0001BB   F583         MOV     DPH,A
   \   0001BD   E0           MOVX    A,@DPTR
   \   0001BE   F8           MOV     R0,A
   \   0001BF   A3           INC     DPTR
   \   0001C0   E0           MOVX    A,@DPTR
   \   0001C1   F9           MOV     R1,A
   \   0001C2   88..         MOV     ?V0 + 4,R0
   \   0001C4   89..         MOV     ?V0 + 5,R1
    353          //      osal_mem_free(((Node*)p1));
    354                if(deletnodelist ==NULL){
   \   0001C6   90....       MOV     DPTR,#deletnodelist
   \   0001C9   E0           MOVX    A,@DPTR
   \   0001CA   F8           MOV     R0,A
   \   0001CB   A3           INC     DPTR
   \   0001CC   E0           MOVX    A,@DPTR
   \   0001CD   F9           MOV     R1,A
   \   0001CE   E8           MOV     A,R0
   \   0001CF   49           ORL     A,R1
   \   0001D0   7021         JNZ     ??detectHandle_7
    355                  deletnodelist = p1;
   \   0001D2   90....       MOV     DPTR,#deletnodelist
   \   0001D5   EE           MOV     A,R6
   \   0001D6   F0           MOVX    @DPTR,A
   \   0001D7   A3           INC     DPTR
   \   0001D8   EF           MOV     A,R7
   \   0001D9   F0           MOVX    @DPTR,A
    356                  deletnodelist->next = NULL;
   \   0001DA   90....       MOV     DPTR,#deletnodelist
   \   0001DD   E0           MOVX    A,@DPTR
   \   0001DE   240C         ADD     A,#0xc
   \   0001E0   F8           MOV     R0,A
   \   0001E1   A3           INC     DPTR
   \   0001E2   E0           MOVX    A,@DPTR
   \   0001E3   3400         ADDC    A,#0x0
   \   0001E5   F9           MOV     R1,A
   \   0001E6   8882         MOV     DPL,R0
   \   0001E8   8983         MOV     DPH,R1
   \   0001EA   7400         MOV     A,#0x0
   \   0001EC   F0           MOVX    @DPTR,A
   \   0001ED   A3           INC     DPTR
   \   0001EE   7400         MOV     A,#0x0
   \   0001F0   F0           MOVX    @DPTR,A
   \   0001F1   8067         SJMP    ??detectHandle_8
    357                }
    358                else{
    359                  p2=deletnodelist;
   \                     ??detectHandle_7:
   \   0001F3   90....       MOV     DPTR,#deletnodelist
   \   0001F6   E0           MOVX    A,@DPTR
   \   0001F7   F8           MOV     R0,A
   \   0001F8   A3           INC     DPTR
   \   0001F9   E0           MOVX    A,@DPTR
   \   0001FA   F9           MOV     R1,A
   \   0001FB   88..         MOV     ?V0 + 0,R0
   \   0001FD   89..         MOV     ?V0 + 1,R1
    360                  while(p2->next){p2=p2->next;}
   \                     ??detectHandle_9:
   \   0001FF   E5..         MOV     A,?V0 + 0
   \   000201   240C         ADD     A,#0xc
   \   000203   F582         MOV     DPL,A
   \   000205   E5..         MOV     A,?V0 + 1
   \   000207   3400         ADDC    A,#0x0
   \   000209   F583         MOV     DPH,A
   \   00020B   E0           MOVX    A,@DPTR
   \   00020C   F8           MOV     R0,A
   \   00020D   A3           INC     DPTR
   \   00020E   E0           MOVX    A,@DPTR
   \   00020F   F9           MOV     R1,A
   \   000210   E8           MOV     A,R0
   \   000211   49           ORL     A,R1
   \   000212   6015         JZ      ??detectHandle_10
   \   000214   E5..         MOV     A,?V0 + 0
   \   000216   240C         ADD     A,#0xc
   \   000218   F582         MOV     DPL,A
   \   00021A   E5..         MOV     A,?V0 + 1
   \   00021C   3400         ADDC    A,#0x0
   \   00021E   F583         MOV     DPH,A
   \   000220   E0           MOVX    A,@DPTR
   \   000221   F5..         MOV     ?V0 + 0,A
   \   000223   A3           INC     DPTR
   \   000224   E0           MOVX    A,@DPTR
   \   000225   F5..         MOV     ?V0 + 1,A
   \   000227   80D6         SJMP    ??detectHandle_9
    361                  p2->next = p1;
   \                     ??detectHandle_10:
   \   000229   E5..         MOV     A,?V0 + 0
   \   00022B   240C         ADD     A,#0xc
   \   00022D   F582         MOV     DPL,A
   \   00022F   E5..         MOV     A,?V0 + 1
   \   000231   3400         ADDC    A,#0x0
   \   000233   F583         MOV     DPH,A
   \   000235   EE           MOV     A,R6
   \   000236   F0           MOVX    @DPTR,A
   \   000237   A3           INC     DPTR
   \   000238   EF           MOV     A,R7
   \   000239   F0           MOVX    @DPTR,A
    362                  p2->next->next=NULL;
   \   00023A   E5..         MOV     A,?V0 + 0
   \   00023C   240C         ADD     A,#0xc
   \   00023E   F582         MOV     DPL,A
   \   000240   E5..         MOV     A,?V0 + 1
   \   000242   3400         ADDC    A,#0x0
   \   000244   F583         MOV     DPH,A
   \   000246   E0           MOVX    A,@DPTR
   \   000247   240C         ADD     A,#0xc
   \   000249   F8           MOV     R0,A
   \   00024A   A3           INC     DPTR
   \   00024B   E0           MOVX    A,@DPTR
   \   00024C   3400         ADDC    A,#0x0
   \   00024E   F9           MOV     R1,A
   \   00024F   8882         MOV     DPL,R0
   \   000251   8983         MOV     DPH,R1
   \   000253   7400         MOV     A,#0x0
   \   000255   F0           MOVX    @DPTR,A
   \   000256   A3           INC     DPTR
   \   000257   7400         MOV     A,#0x0
   \   000259   F0           MOVX    @DPTR,A
    363                }
    364                p1=p3;
   \                     ??detectHandle_8:
   \   00025A   AE..         MOV     R6,?V0 + 4
   \   00025C   AF..         MOV     R7,?V0 + 5
    365                while(p3->prior != NULL)
   \                     ??detectHandle_11:
   \   00025E   E5..         MOV     A,?V0 + 4
   \   000260   240E         ADD     A,#0xe
   \   000262   F582         MOV     DPL,A
   \   000264   E5..         MOV     A,?V0 + 5
   \   000266   3400         ADDC    A,#0x0
   \   000268   F583         MOV     DPH,A
   \   00026A   E0           MOVX    A,@DPTR
   \   00026B   F8           MOV     R0,A
   \   00026C   A3           INC     DPTR
   \   00026D   E0           MOVX    A,@DPTR
   \   00026E   F9           MOV     R1,A
   \   00026F   E8           MOV     A,R0
   \   000270   49           ORL     A,R1
   \   000271   6015         JZ      ??detectHandle_12
    366                  p3 = p3->prior;
   \   000273   E5..         MOV     A,?V0 + 4
   \   000275   240E         ADD     A,#0xe
   \   000277   F582         MOV     DPL,A
   \   000279   E5..         MOV     A,?V0 + 5
   \   00027B   3400         ADDC    A,#0x0
   \   00027D   F583         MOV     DPH,A
   \   00027F   E0           MOVX    A,@DPTR
   \   000280   F5..         MOV     ?V0 + 4,A
   \   000282   A3           INC     DPTR
   \   000283   E0           MOVX    A,@DPTR
   \   000284   F5..         MOV     ?V0 + 5,A
   \   000286   80D6         SJMP    ??detectHandle_11
    367                *pNode = p3;
   \                     ??detectHandle_12:
   \   000288   85..82       MOV     DPL,?V0 + 6
   \   00028B   85..83       MOV     DPH,?V0 + 7
   \   00028E   E5..         MOV     A,?V0 + 4
   \   000290   F0           MOVX    @DPTR,A
   \   000291   A3           INC     DPTR
   \   000292   E5..         MOV     A,?V0 + 5
   \   000294   F0           MOVX    @DPTR,A
    368          //      (*pNode)->extaddr[2] = 0xff;
    369                //gizwit_status = 0;//发送给机智云状态数据
    370                continue;
   \   000295   02....       LJMP    ??detectHandle_0 & 0xFFFF
    371              }
    372              p1 = p1->next;
   \                     ??detectHandle_4:
   \   000298   EE           MOV     A,R6
   \   000299   240C         ADD     A,#0xc
   \   00029B   F582         MOV     DPL,A
   \   00029D   EF           MOV     A,R7
   \   00029E   3400         ADDC    A,#0x0
   \   0002A0   F583         MOV     DPH,A
   \   0002A2   E0           MOVX    A,@DPTR
   \   0002A3   FE           MOV     R6,A
   \   0002A4   A3           INC     DPTR
   \   0002A5   E0           MOVX    A,@DPTR
   \   0002A6   FF           MOV     R7,A
   \   0002A7   02....       LJMP    ??detectHandle_0 & 0xFFFF
    373            }
    374          //  *pNode = p2;
    375            return 1;
   \                     ??detectHandle_1:
   \   0002AA   7901         MOV     R1,#0x1
   \   0002AC   7410         MOV     A,#0x10
   \   0002AE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0002B1   7F0A         MOV     R7,#0xa
   \   0002B3   02....       LJMP    ?BANKED_LEAVE_XDATA
    376          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    377          uint8 mac_table_fresh( afIncomingMSGPacket_t *pkt )
   \                     mac_table_fresh:
    378          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    379          //  uint8 currentMac[8];
    380            Node *currentnode;
    381            if( (pkt->cmd.Data[0])==0 || (pkt->cmd.Data[0])==2 ){// 发现请求建立数据包和心跳包时更新mac list table
   \   000009   EE           MOV     A,R6
   \   00000A   2422         ADD     A,#0x22
   \   00000C   F582         MOV     DPL,A
   \   00000E   EF           MOV     A,R7
   \   00000F   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000012   F583         MOV     DPH,A
   \   000014   8882         MOV     DPL,R0
   \   000016   E0           MOVX    A,@DPTR
   \   000017   6014         JZ      ??mac_table_fresh_0
   \   000019   EE           MOV     A,R6
   \   00001A   2422         ADD     A,#0x22
   \   00001C   F582         MOV     DPL,A
   \   00001E   EF           MOV     A,R7
   \   00001F   12....       LCALL   ??Subroutine9_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   000022   A3           INC     DPTR
   \   000023   E0           MOVX    A,@DPTR
   \   000024   F583         MOV     DPH,A
   \   000026   8882         MOV     DPL,R0
   \   000028   E0           MOVX    A,@DPTR
   \   000029   6402         XRL     A,#0x2
   \   00002B   706D         JNZ     ??mac_table_fresh_1
    382              if(true == APSME_LookupExtAddr(pkt->srcAddr.addr.shortAddr,currentMac)){
   \                     ??mac_table_fresh_0:
   \   00002D                ; Setup parameters for call to function APSME_LookupExtAddr
   \   00002D   7C..         MOV     R4,#currentMac & 0xff
   \   00002F   7D..         MOV     R5,#(currentMac >> 8) & 0xff
   \   000031   8E82         MOV     DPL,R6
   \   000033   8F83         MOV     DPH,R7
   \   000035   A3           INC     DPTR
   \   000036   A3           INC     DPTR
   \   000037   A3           INC     DPTR
   \   000038   A3           INC     DPTR
   \   000039   A3           INC     DPTR
   \   00003A   A3           INC     DPTR
   \   00003B   E0           MOVX    A,@DPTR
   \   00003C   FA           MOV     R2,A
   \   00003D   A3           INC     DPTR
   \   00003E   E0           MOVX    A,@DPTR
   \   00003F   FB           MOV     R3,A
   \   000040   12....       LCALL   ??APSME_LookupExtAddr?relay
   \   000043   E9           MOV     A,R1
   \   000044   6401         XRL     A,#0x1
   \   000046   703A         JNZ     ??mac_table_fresh_2
    383                currentnode = searchfromList(nodelist,currentMac);
   \   000048                ; Setup parameters for call to function searchfromList
   \   000048   7C..         MOV     R4,#currentMac & 0xff
   \   00004A   7D..         MOV     R5,#(currentMac >> 8) & 0xff
   \   00004C   90....       MOV     DPTR,#nodelist
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   FA           MOV     R2,A
   \   000051   A3           INC     DPTR
   \   000052   E0           MOVX    A,@DPTR
   \   000053   FB           MOV     R3,A
   \   000054   12....       LCALL   ??searchfromList?relay
   \   000057   8A82         MOV     DPL,R2
   \   000059   8B83         MOV     DPH,R3
    384                if(currentnode == NULL)
   \   00005B   E582         MOV     A,DPL
   \   00005D   4583         ORL     A,DPH
   \   00005F   7011         JNZ     ??mac_table_fresh_3
    385                  newdevice_joinin = insertLastList(&nodelist,currentMac);
   \   000061                ; Setup parameters for call to function insertLastList
   \   000061   7C..         MOV     R4,#currentMac & 0xff
   \   000063   7D..         MOV     R5,#(currentMac >> 8) & 0xff
   \   000065   7A..         MOV     R2,#nodelist & 0xff
   \   000067   7B..         MOV     R3,#(nodelist >> 8) & 0xff
   \   000069   12....       LCALL   ??insertLastList?relay
   \   00006C   E9           MOV     A,R1
   \   00006D   90....       MOV     DPTR,#newdevice_joinin
   \   000070   800B         SJMP    ??mac_table_fresh_4
    386                else
    387                  currentnode->heartbeatCnt++;
   \                     ??mac_table_fresh_3:
   \   000072   A3           INC     DPTR
   \   000073   A3           INC     DPTR
   \   000074   A3           INC     DPTR
   \   000075   A3           INC     DPTR
   \   000076   A3           INC     DPTR
   \   000077   A3           INC     DPTR
   \   000078   A3           INC     DPTR
   \   000079   A3           INC     DPTR
   \   00007A   A3           INC     DPTR
   \   00007B   E0           MOVX    A,@DPTR
   \   00007C   04           INC     A
   \                     ??mac_table_fresh_4:
   \   00007D   F0           MOVX    @DPTR,A
    388                return 0;//找到设备mac
   \   00007E   7900         MOV     R1,#0x0
   \   000080   801A         SJMP    ??mac_table_fresh_5
    389              }
    390              else{
    391                ZDP_IEEEAddrReq(pkt->srcAddr.addr.shortAddr , ZDP_ADDR_REQTYPE_SINGLE, 0 ,0 );
   \                     ??mac_table_fresh_2:
   \   000082                ; Setup parameters for call to function ZDP_IEEEAddrReq
   \   000082   7D00         MOV     R5,#0x0
   \   000084   7C00         MOV     R4,#0x0
   \   000086   7900         MOV     R1,#0x0
   \   000088   8E82         MOV     DPL,R6
   \   00008A   8F83         MOV     DPH,R7
   \   00008C   A3           INC     DPTR
   \   00008D   A3           INC     DPTR
   \   00008E   A3           INC     DPTR
   \   00008F   A3           INC     DPTR
   \   000090   A3           INC     DPTR
   \   000091   A3           INC     DPTR
   \   000092   E0           MOVX    A,@DPTR
   \   000093   FA           MOV     R2,A
   \   000094   A3           INC     DPTR
   \   000095   E0           MOVX    A,@DPTR
   \   000096   FB           MOV     R3,A
   \   000097   12....       LCALL   ??ZDP_IEEEAddrReq?relay
    392          //      HalUARTWrite(0,"LookupExtAddr err\r\n",19);
    393              }
    394            }
    395            return 1;//找不到设备mac
   \                     ??mac_table_fresh_1:
   \   00009A   7901         MOV     R1,#0x1
   \                     ??mac_table_fresh_5:
   \   00009C   7F02         MOV     R7,#0x2
   \   00009E   02....       LJMP    ?BANKED_LEAVE_XDATA
    396          }

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initList?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initList

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??searchfromList?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    searchfromList

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??insertLastList?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    insertLastList

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??detectHandle?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    detectHandle

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??mac_table_fresh?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    mac_table_fresh

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {48, 49, 50, 51, 52, 53, 54, 55, 56`:
   \   000000   30           DB 48
   \   000001   31           DB 49
   \   000002   32           DB 50
   \   000003   33           DB 51
   \   000004   34           DB 52
   \   000005   35           DB 53
   \   000006   36           DB 54
   \   000007   37           DB 55
   \   000008   38           DB 56
   \   000009   39           DB 57
   \   00000A   41           DB 65
   \   00000B   42           DB 66
   \   00000C   43           DB 67
   \   00000D   44           DB 68
   \   00000E   45           DB 69
   \   00000F   46           DB 70

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\r\\naddMac:">`:
   \   000000   0D0A6164     DB "\015\012addMac:"
   \            644D6163
   \            3A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n">`:
   \   000000   0A00         DB "\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\r\\nlist memalloc error">`:
   \   000000   0D0A6C69     DB "\015\012list memalloc error"
   \            7374206D
   \            656D616C
   \            6C6F6320
   \            6572726F
   \            7200    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {48, 49, 50, 51, 52, 53, 54, 55, 56_1`:
   \   000000   30           DB 48
   \   000001   31           DB 49
   \   000002   32           DB 50
   \   000003   33           DB 51
   \   000004   34           DB 52
   \   000005   35           DB 53
   \   000006   36           DB 54
   \   000007   37           DB 55
   \   000008   38           DB 56
   \   000009   39           DB 57
   \   00000A   41           DB 65
   \   00000B   42           DB 66
   \   00000C   43           DB 67
   \   00000D   44           DB 68
   \   00000E   45           DB 69
   \   00000F   46           DB 70

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "deleteMAC:">`:
   \   000000   64656C65     DB "deleteMAC:"
   \            74654D41
   \            433A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\r\\n">`:
   \   000000   0D0A00       DB "\015\012"
    397          //uint8 deleteOneList(Node *pNode,elemType insertElem)
    398          //{
    399          //  Node *pInsert;
    400          //  Node *pHead;
    401          //  Node *pTmp; //定义一个临时链表用来存放第一个节点
    402          //  
    403          //  pHead = pNode;
    404          //  pTmp = pHead;
    405          //  pInsert = (Node *)osal_mem_alloc(sizeof(Node)); //申请一个新节点
    406          //  osal_memset(pInsert,0,sizeof(Node));
    407          //  pInsert->element = insertElem;
    408          //  
    409          //  while(pHead->next != NULL)
    410          //  {
    411          //    pHead = pHead->next;
    412          //  }
    413          //  pHead->next = pInsert;   //将链表末尾节点的下一结点指向新添加的节点
    414          //  pNode = pTmp;
    415          //  //pruint8f("insertLastList函数执行，向表尾插入元素成功\n");
    416          //  
    417          //  return 1;
    418          //}

   Maximum stack usage in bytes:

     Function                 ISTACK PSTACK XSTACK
     --------                 ------ ------ ------
     detectHandle                 2      0     34
       -> HalUARTWrite            0      0     68
       -> HalUARTWrite            0      0     68
       -> HalUARTWrite            0      0     68
       -> HalUARTWrite            0      0     68
     initList                     2      0      0
     insertLastList               2      0     47
       -> osal_mem_alloc          0      0     68
       -> osal_memcpy             0      0     74
       -> HalUARTWrite            0      0     68
       -> HalUARTWrite            0      0     68
       -> HalUARTWrite            0      0     68
       -> HalUARTWrite            0      0     68
       -> osal_mem_alloc          0      0     68
       -> HalUARTWrite            0      0     68
       -> osal_memcpy             0      0     74
       -> HalUARTWrite            0      0     68
       -> HalUARTWrite            0      0     68
       -> HalUARTWrite            0      0     68
     mac_table_fresh              0      0     10
       -> APSME_LookupExtAddr     0      0     20
       -> searchfromList          0      0     20
       -> insertLastList          0      0     20
       -> ZDP_IEEEAddrReq         0      0     20
     searchfromList               0      0     28
       -> osal_memcmp             0      0     36


   Segment part sizes:

     Function/Label                                   Bytes
     --------------                                   -----
     currentMac                                          8
     NewMacUpate                                         1
     initList                                           32
     ?Subroutine2                                        3
     ??Subroutine8_0                                     8
     ?Subroutine7                                       11
     searchfromList                                    108
     ??Subroutine9_0                                     5
     insertLastList                                    439
     ?Subroutine5                                        8
     ?Subroutine3                                        1
     ??Subroutine10_0                                    7
     ?Subroutine1                                       23
     ?Subroutine0                                       46
     ?Subroutine6                                       24
     ?Subroutine4                                        9
     detectHandle                                      694
     mac_table_fresh                                   161
     ??initList?relay                                    6
     ??searchfromList?relay                              6
     ??insertLastList?relay                              6
     ??detectHandle?relay                                6
     ??mac_table_fresh?relay                             6
     ?<Constant {48, 49, 50, 51, 52, 53, 54, 55, 56     16
     ?<Constant "\r\naddMac:">                          10
     ?<Constant "\n">                                    2
     ?<Constant "\r\nlist memalloc error">              22
     ?<Constant {48, 49, 50, 51, 52, 53, 54, 55, 56_1   16
     ?<Constant "deleteMAC:">                           11
     ?<Constant "\r\n">                                  3

 
 1 579 bytes in segment BANKED_CODE
    30 bytes in segment BANK_RELAYS
    80 bytes in segment XDATA_ROM_C
     9 bytes in segment XDATA_Z
 
 1 609 bytes of CODE  memory
    80 bytes of CONST memory
     9 bytes of XDATA memory

Errors: none
Warnings: none
